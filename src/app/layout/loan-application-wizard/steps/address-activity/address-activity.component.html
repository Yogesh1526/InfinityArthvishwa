<div *ngIf="formLoaded" class="address-container">
  <!-- Saved Addresses -->
  <div *ngIf="addressList.length > 0 && !isEditable">
    <h2><mat-icon>home</mat-icon> Saved Addresses</h2>

    <div class="card-list">
      <div *ngFor="let addr of addressList" class="address-card">
        <div class="card-body">
          <p><strong>Ownership:</strong> {{ addr.ownership }}</p>
          <p><strong>Address:</strong> {{ addr.addressLine1 }}, {{ addr.addressLine2 }}</p>
          <p><strong>Landmark:</strong> {{ addr.landmark }}</p>
          <p><strong>Village:</strong> {{ addr.village }}</p>
          <p><strong>District:</strong> {{ addr.district }}</p>
          <p><strong>State:</strong> {{ addr.state }}</p>
          <p><strong>Pincode:</strong> {{ addr.pincode }}</p>
          <p><strong>Country:</strong> {{ addr.country }}</p>
          <p><strong>Years at Residence:</strong> {{ addr.yearsOfResidence }}</p>
        </div>

        <div class="card-actions">
          <button mat-stroked-button color="accent" (click)="editAddress(addr)">Edit</button>
        </div>
      </div>
    </div>

    <div class="add-button">
      <button mat-flat-button color="primary" (click)="addNew()">Add New Address</button>
    </div>
  </div>

  <!-- Address Form -->
  <div *ngIf="isEditable" class="address-form-card">
    <h2><mat-icon color="primary">edit_location_alt</mat-icon> Address Form</h2>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Ownership</mat-label>
          <input matInput formControlName="residentialAddressOwnership" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Address Line 1</mat-label>
          <input matInput formControlName="addressLine1" />
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Address Line 2</mat-label>
          <input matInput formControlName="addressLine2" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Landmark</mat-label>
          <input matInput formControlName="landmark" />
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Village/Town/City</mat-label>
          <input matInput formControlName="villageTownCity" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>District</mat-label>
          <input matInput formControlName="district" />
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>State</mat-label>
          <input matInput formControlName="state" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Pincode</mat-label>
          <input matInput maxlength="6" formControlName="pincode" />
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Country</mat-label>
          <input matInput formControlName="country" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Years at Residence</mat-label>
          <input matInput type="number" formControlName="yearsAtResidence" />
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button mat-flat-button color="primary" type="submit">Save</button>
        <button mat-stroked-button color="warn" type="button">Cancel</button>
      </div>
    </form>
  </div>
</div>
