<div class="dashboard-wrapper">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-title">
        <h1>Dashboard</h1>
        <p class="header-subtitle">Welcome back! Here's what's happening with your gold loan applications today.</p>
      </div>
      <div class="header-actions">
        <button mat-stroked-button>
          <mat-icon>date_range</mat-icon>
          <span>Date Range</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Summary Cards Grid -->
  <div class="summary-cards-grid">
    <div class="summary-card" *ngFor="let card of summaryCards">
      <div class="card-icon-wrapper" [ngClass]="card.colorClass">
        <mat-icon>{{ card.icon }}</mat-icon>
      </div>
      <div class="card-content">
        <div class="card-label">{{ card.title }}</div>
        <div class="card-value">{{ card.value }}</div>
        <div class="card-change" *ngIf="card.change">
          <mat-icon [ngClass]="card.change.positive ? 'positive' : 'negative'">
            {{ card.change.positive ? 'trending_up' : 'trending_down' }}
          </mat-icon>
          <span [ngClass]="card.change.positive ? 'positive' : 'negative'">
            {{ card.change.positive ? '+' : '' }}{{ card.change.percentage }}%
          </span>
          <span class="change-period">{{ card.change.period }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts and Additional Content Section -->
  <div class="content-section">
    <!-- Charts Section -->
    <div class="charts-section">
      <!-- Main Charts Row -->
      <div class="charts-row">
        <!-- Loan Status Distribution -->
        <mat-card class="chart-card">
          <div class="chart-card-header">
            <div class="chart-title">
              <mat-icon>pie_chart</mat-icon>
              <span>Loan Status Distribution</span>
            </div>
            <button mat-icon-button (click)="openChartDialog('donut')" matTooltip="Expand Chart">
              <mat-icon>open_in_full</mat-icon>
            </button>
          </div>
          <div class="chart-container">
            <echarts [options]="donutChart" class="chart"></echarts>
          </div>
        </mat-card>

        <!-- Monthly Loan Applications -->
        <mat-card class="chart-card">
          <div class="chart-card-header">
            <div class="chart-title">
              <mat-icon>bar_chart</mat-icon>
              <span>Monthly Loan Applications</span>
            </div>
            <button mat-icon-button (click)="openChartDialog('bar')" matTooltip="Expand Chart">
              <mat-icon>open_in_full</mat-icon>
            </button>
          </div>
          <div class="chart-container">
            <echarts [options]="barChart" class="chart"></echarts>
          </div>
        </mat-card>
      </div>

      <!-- Secondary Charts Row -->
      <div class="charts-row">
        <!-- Monthly Disbursement Trend -->
        <mat-card class="chart-card">
          <div class="chart-card-header">
            <div class="chart-title">
              <mat-icon>show_chart</mat-icon>
              <span>Monthly Disbursement (₹)</span>
            </div>
            <button mat-icon-button (click)="openChartDialog('line')" matTooltip="Expand Chart">
              <mat-icon>open_in_full</mat-icon>
            </button>
          </div>
          <div class="chart-container">
            <echarts [options]="lineChart" class="chart"></echarts>
          </div>
        </mat-card>

        <!-- Customer Segmentation -->
        <mat-card class="chart-card">
          <div class="chart-card-header">
            <div class="chart-title">
              <mat-icon>people</mat-icon>
              <span>New vs Returning Customers</span>
            </div>
            <button mat-icon-button (click)="openChartDialog('pie')" matTooltip="Expand Chart">
              <mat-icon>open_in_full</mat-icon>
            </button>
          </div>
          <div class="chart-container">
            <echarts [options]="pieChart" class="chart"></echarts>
          </div>
        </mat-card>
      </div>

      <!-- Third Row - Loan Amount Distribution -->
      <div class="charts-row">
        <mat-card class="chart-card">
          <div class="chart-card-header">
            <div class="chart-title">
              <mat-icon>account_balance_wallet</mat-icon>
              <span>Loan Amount Distribution</span>
            </div>
            <button mat-icon-button (click)="openChartDialog('amountBand')" matTooltip="Expand Chart">
              <mat-icon>open_in_full</mat-icon>
            </button>
          </div>
          <div class="chart-container">
            <echarts [options]="amountBandChart" class="chart"></echarts>
          </div>
        </mat-card>
      </div>
    </div>

    <!-- Sidebar Section -->
    <div class="sidebar-section">
      <!-- Quick Actions -->
      <mat-card class="sidebar-card quick-actions-card">
        <div class="sidebar-card-header">
          <mat-icon>flash_on</mat-icon>
          <span>Quick Actions</span>
        </div>
        <div class="quick-actions-list">
          <button mat-stroked-button class="action-button" *ngFor="let action of quickActions" (click)="onQuickAction(action.action)">
            <mat-icon>{{ action.icon }}</mat-icon>
            <span>{{ action.label }}</span>
          </button>
        </div>
      </mat-card>

      <!-- Recent Activities -->
      <mat-card class="sidebar-card activities-card">
        <div class="sidebar-card-header">
          <mat-icon>history</mat-icon>
          <span>Recent Activities</span>
        </div>
        <div class="activities-list">
          <div class="activity-item" *ngFor="let activity of recentActivities">
            <div class="activity-icon" [ngClass]="activity.type">
              <mat-icon>{{ activity.icon }}</mat-icon>
            </div>
            <div class="activity-content">
              <div class="activity-title">{{ activity.title }}</div>
              <div class="activity-time">{{ activity.time }}</div>
            </div>
          </div>
        </div>
      </mat-card>
    </div>
  </div>

  <!-- Recent Applications Table -->
  <mat-card class="table-card">
    <div class="table-card-header">
      <div class="table-title">
        <mat-icon>receipt_long</mat-icon>
        <span>Recent Loan Applications</span>
      </div>
      <button mat-button color="primary" (click)="viewAllApplications()">View All</button>
    </div>
    <div class="table-wrapper">
      <table class="applications-table">
        <thead>
          <tr>
            <th>Application ID</th>
            <th>Customer Name</th>
            <th>Loan Amount</th>
            <th>Status</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let application of recentApplications">
            <td class="app-id">{{ application.id }}</td>
            <td class="customer-name">
              <div class="name-cell">
                <mat-icon>person</mat-icon>
                <span>{{ application.customerName }}</span>
              </div>
            </td>
            <td class="amount">₹{{ application.amount | number }}</td>
            <td>
              <span class="status-badge" [ngClass]="getStatusClass(application.status)">
                {{ application.status }}
              </span>
            </td>
            <td class="date">{{ application.date }}</td>
            <td>
              <button mat-icon-button matTooltip="View Details" (click)="viewApplicationDetails(application)">
                <mat-icon>visibility</mat-icon>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </mat-card>
</div>
